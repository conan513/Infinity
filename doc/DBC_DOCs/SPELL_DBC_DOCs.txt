Spell.dbc

1 Structure
2 SpellAttributes
3 AuraStates
4 ProcFlags

`Spells` DBC
Spells: The heart of everything.

Version is : 3.3.5a

############
Structure ##
############

Column	           Field              	 Type           	 Notes
1	                Id              	 Integer	
2	               Category         	 Integer	         Ref-ID
3	               Dispel           	 Integer        	 Ref-ID
4	               Mechanic          	 Integer         	 Ref-ID
5-12	           Attributes	         Integer	         Bitmask; see below
13	               Stances	             Integer	         Ref-ID; Bitmask
14	 Unknown	 Integer	 new in 3.2.0
15	StancesNot	 Integer	 Ref-ID; Bitmask
16	 Unknown	 Integer	 new in 3.2.0
17	 Targets	 Integer	 ?
18	TargetCreatureType	 Integer	 Ref-ID; Bitmask
19	RequiresSpellFocus	 Integer	 Ref-ID
20	 FacingCasterFlags	 Integer	 Bitmask
21	 CasterAuraState	 Integer	 see below
22	 TargetAuraState	 Integer	 "
23	 CasterAuraStateNot	 Integer	 "
24	 TargetAuraStateNot	 Integer	 "
25	CasterAuraSpell	 Integer	 Ref-ID
26	TargetAuraSpell	 Integer	 Ref-ID
27	ExcludeCasterAuraSpell	 Integer	 Ref-ID
28	ExcludeTargetAuraSpell	 Integer	 Ref-ID
29	CastingTimeIndex	 Integer	 Ref-ID
30	 RecoveryTime	 Integer	 in ms
31	 CategoryRecoveryTime	 Integer	 in ms
32	 InterruptFlags	 Integer	 Bitmask
33	 AuraInterruptFlags	 Integer	 Bitmask
34	 ChannelInterruptFlags	 Integer	 Bitmask
35	 ProcFlags	 Integer	 Bitmask; see below
36	 ProcChance	 Integer	
37	 ProcCharges	 Integer	
38	 MaxLevel	 Integer	
39	 BaseLevel	 Integer	
40	 SpellLevel	 Integer	
41	DurationIndex	 Integer	 Ref-ID
42	 PowerType	 Integer	 0=mana, 1=rage, 2=focus, 3=energy , 4=happiness, 5=rune, 6=runicPower, -2=health
43	 PowerCost	 Integer	
44	 PowerCostPerLevel	 Integer	
45	 PowerPerSecond	 Integer	
46	 PowerPerSecondPerLevel	 Integer	
47	 RangeIndex	 Integer	
48	 Speed	 Float	
49	 ModalNextSpell	 Integer	
50	 StackAmount	 Integer	
51-52	Totem	 Integer	 Ref-ID; also used by item_template
53-60	Reagent	 Integer	 Ref-ID; also used by item_template
61-68	 ReagentCount	 Integer	
69	EquippedItemClass	 Integer	 Ref-ID
70	EquippedItemSubClassMask	 Integer	 Ref-ID; Bitmask
71	 EquippedItemInventoryTypeMask	 Integer	 Bitmask
72-74	 Effect	 Integer

75-77	 EffectDieSides3	 Integer	75	Dmg Dice 1	Int	Spell Effect 1: damage on spell cast, or heal, or per tic.  76	Dmg Dice 1	Int	Spell Effect 2: damage on spell cast min/max, or heal, or yards of effect ex. "knock backs". 77	Dmg Dice 1	Int	Spell Effect 3: damage on spell cast max, is usually used for mods though ex. "Reduced Dmg Done -53%".

78-80	 EffectRealPointsPerLevel	 Float	
81-83	 EffectBasePoints	 Integer	 don't must be used in spell/auras explicitly, must be used cached Spell::m_currentBasePoints
84-86	EffectMechanic	 Integer	 Ref-ID
87-89	 EffectImplicitTargetA	 Integer	
90-92	 EffectImplicitTargetB	 Integer	
93-95	EffectRadiusIndex	 Integer	 Ref-ID
96-98	 EffectApplyAuraName	 Integer	
99-101	 EffectAmplitude	 Integer	 in ms
102-104	 EffectMultipleValue	 Float	 in ms
105-107	 EffectChainTarget	 Integer	
108-110	EffectItemType	 Integer	 also used by item_template
111-113	 EffectMiscValue	 Integer	
114-116	 EffectMiscValueB	 Integer	
117-119	EffectTriggerSpell	 Integer	 Ref-ID
120-122	 EffectPointsPerComboPoint	 Float	 ?
123-125	 EffectSpellClassMaskA	 Integer	 Bitmask for effect 0
126-128	 EffectSpellClassMaskB	 Integer	 Bitmask for effect 1
129-131	 EffectSpellClassMaskC	 Integer	 Bitmask for effect 2
132-133	SpellVisual	 Integer	 Ref-ID
134	SpellIconID	 Integer	 Ref-ID             Spell Icon found in Spellicon.dbc
135	ActiveIconID	 Integer	 Ref-ID
136	 SpellPriority	 Integer	
137-153	 SpellName	 String	Loc.
154-170	 Rank	 String	Loc.
171-187	 Description	 String	Loc.
188-204	 ToolTip	 String	Loc.
205	 ManaCostPercentage	 Integer	
206	 StartRecoveryCategory	 Integer	
207	 StartRecoveryTime	 Integer	 in ms
208	 MaxTargetLevel	 Integer	
209	 SpellFamilyName	 Integer	
210-212	 SpellFamilyFlags	 Integer	 Bitmask
213	 MaxAffectedTargets	 Integer	
214	 DmgClass	 Integer	 0=none, 1=magic, 2=melee, 3=ranged
215	 PreventionType	 Integer	 0=none, 1=silence, 2=pacify
216	 StanceBarOrder	 Integer	
217-219	 DmgMultiplier	 Float	
220	ReqFactionId	 Integer	 Ref-ID
221	 MinReputation	 Integer	
222	 RequiredAuraVision	 Integer	
223-224	TotemCategory	 Integer	 Ref-ID
225	AreaGroupID	 Integer	 Ref-ID
226	SchoolMask	 Integer	 Ref-ID; Bitmask
227	RuneCostID	 Integer	 Ref-ID
228	SpellMissileID	 Integer	 Ref-ID
229	PowerDisplayID	 Integer	 Ref-ID
230-232	 EffectBonusCoefficient	 Float	
233	SpellDescriptionVariableID	 Integer	 Ref-ID
234	SpellDifficultyID	 Integer	 Ref-ID

##################
SpellAttributes ##
##################

Attributes per Field. Unknown Attributes are not mapped
These Flags are subject to ongoing interpretation.

Flags          	 Name	                     Notes
Field1
0x00000002	 SPELL_ATTR_RANGED           	 All ranged abilites have this flag
0x00000004	 SPELL_ATTR_ON_NEXT_SWING_1 	 on next swing
0x00000020	 SPELL_ATTR_TRADESPELL      	 trade spells, will be added by client to a sublist of profession spell
0x00000040	 SPELL_ATTR_PASSIVE         	 Passive spell
0x00000080	 SPELL_ATTR0_HIDDEN_CLIENTSIDE 	 Spells with this attribute are not visible in spellbook or aura bar
0x00000100	 SPELL_ATTR0_HIDE_IN_COMBAT_LOG	 This attribite controls whether spell appears in combat logs
0x00000400	 SPELL_ATTR_ON_NEXT_SWING_2  	 on next swing 2
0x00001000	 SPELL_ATTR_DAYTIME_ONLY    	 only useable at daytime, not set in 2.4.2
0x00002000	 SPELL_ATTR_NIGHT_ONLY      	 only useable at night, not set in 2.4.2
0x00004000	 SPELL_ATTR_INDOORS_ONLY    	 only useable indoors, not set in 2.4.2
0x00008000	 SPELL_ATTR_OUTDOORS_ONLY   	 Only useable outdoors.
0x00010000	 SPELL_ATTR_NOT_SHAPESHIFT   	 Not while shapeshifted
0x00020000	 SPELL_ATTR_ONLY_STEALTHED   	 Must be in stealth
0x00080000	 SPELL_ATTR_LEVEL_DAMAGE_CALCULATION	 spelldamage depends on caster level
0x00100000	 SPELL_ATTR_STOP_ATTACK_TARGET       	 Stop attack after use this spell (and not begin attack if use)
0x00200000	 SPELL_ATTR_IMPOSSIBLE_DODGE_PARRY_BLOCK	 Cannot be dodged/parried/blocked
0x00400000	 SPELL_ATTR_SET_TRACKING_TARGET         	 SetTrackingTarget
0x00800000	 SPELL_ATTR_CASTABLE_WHILE_DEAD     	 castable while dead?
0x01000000	 SPELL_ATTR_CASTABLE_WHILE_MOUNTED   	 castable while mounted
0x02000000	 SPELL_ATTR_DISABLED_WHILE_ACTIVE   	 Activate and start cooldown after aura fade or remove summoned creature or go
0x04000000	 SPELL_ATTR_NEGATIVE_1	
0x08000000	 SPELL_ATTR_CASTABLE_WHILE_SITTING   	 castable while sitting
0x10000000	 SPELL_ATTR_CANT_USED_IN_COMBAT     	 Cannot be used in combat
0x20000000	 SPELL_ATTR_UNAFFECTED_BY_INVULNERABILITY	 unaffected by invulnerability (hmm possible not...)
0x40000000	 SPELL_ATTR_BREAKABLE_BY_DAMAGE	
0x80000000	 SPELL_ATTR_CANT_CANCEL                 	 positive aura can't be canceled
Field2
0x00000001	 SPELL_ATTR_EX_DISMISS_PET	 dismiss pet and not allow to summon new one?
0x00000002	 SPELL_ATTR_EX_DRAIN_ALL_POWER	 use all power (Only paladin Lay of Hands and Bunyanize)
0x00000004	 SPELL_ATTR_EX_CHANNELED_1	 channeled 1
0x00000008	 SPELL_ATTR_EX_PUT_CASTER_IN_COMBAT	 spells that cause a caster to enter a combat
0x00000020	 SPELL_ATTR_EX_NOT_BREAK_STEALTH	 Not break stealth
0x00000040	 SPELL_ATTR_EX_CHANNELED_2	 channeled 2
0x00000080	 SPELL_ATTR_EX_NEGATIVE	
0x00000100	 SPELL_ATTR_EX_NOT_IN_COMBAT_TARGET	 Spell req target not to be in combat state
0x00000400	 SPELL_ATTR_EX_NO_THREAT	 no generates threat on cast 100%
0x00000800	 SPELL_ATTR_EX_UNK11	
0x00001000	 SPELL_ATTR_EX_UNK12	
0x00002000	 SPELL_ATTR_EX_USE_RADIUS_AS_MAX_DISTANCE	
0x00004000	 SPELL_ATTR_EX_STACK_FOR_DIFF_CASTERS	
0x00008000	 SPELL_ATTR_EX_DISPEL_AURAS_ON_IMMUNITY	 remove auras on immunity
0x00010000	 SPELL_ATTR_EX_UNAFFECTED_BY_SCHOOL_IMMUNE	 unaffected by school immunity
0x00020000	 SPELL_ATTR_EX_NOT_AUTOCASTABLE_BY_PET	
0x00080000	 SPELL_ATTR_EX_CANT_TARGET_SELF	 Applies only to unit target - for example Divine Intervention (19752)
0x00100000	 SPELL_ATTR_EX_REQ_TARGET_COMBO_POINTS	 Req combo points on target
0x00400000	 SPELL_ATTR_EX_REQ_COMBO_POINTS	 Use combo points (in 4.x not required combo point target selected)
0x10000000	 SPELL_ATTR_EX_IGNORE_IMMUNITY	
0x40000000	 SPELL_ATTR_EX_ENABLE_AT_DODGE	 Overpower, Wolverine Bite
Field3
0x00000001	 SPELL_ATTR_EX2_ALLOW_DEAD_TARGET	
0x00000004	 SPELL_ATTR_EX2_CANT_REFLECTED	  ? used for detect can or not spell reflected // do not need LOS (e.g. 18220 since 3.3.3)
0x00000010	 SPELL_ATTR_EX2_ALWAYS_APPLY_MODIFIERS	
0x00000020	 SPELL_ATTR_EX2_AUTOREPEAT_FLAG	
0x00000800	 SPELL_ATTR_EX2_HEALTH_FUNNEL	
0x00010000	 SPELL_ATTR_EX2_TAME_BEAST	
0x00020000	 SPELL_ATTR_EX2_NOT_RESET_AUTO_ACTIONS	 suspend weapon timer instead of resetting it, (?Hunters Shot and Stings only have this flag?)
0x00080000	 SPELL_ATTR_EX2_NOT_NEED_SHAPESHIFT	 does not necessarly need shapeshift
0x00200000	 SPELL_ATTR_EX2_DAMAGE_REDUCED_SHIELD	 for ice blocks, pala immunity buffs, priest absorb shields, but used also for other spells -> not sure!
0x20000000	 SPELL_ATTR_EX2_CANT_CRIT	 Spell can't crit
0x40000000	 SPELL_ATTR_EX2_TRIGGERED_CAN_TRIGGER	 spell can trigger even if triggered
0x80000000	 SPELL_ATTR_EX2_FOOD_BUFF	 Food or Drink Buff (like Well Fed)
Field4
0x00000008	 SPELL_ATTR_EX3_BLOCKABLE_SPELL	
0x00000010	 SPELL_ATTR_EX3_REBIRTH	 only rebirth has this flag
0x00000080	 SPELL_ATTR_EX3_STACK_FOR_DIFF_CASTERS	 create a separate (de)buff stack for each caster
0x00000100	 SPELL_ATTR_EX3_PLAYERS_ONLY	
0x00000200	 SPELL_ATTR_EX3_TRIGGERED_CAN_TRIGGER_2	 triggered from effect?
0x00000400	 SPELL_ATTR_EX3_MAIN_HAND	 Main hand weapon required
0x00000800	 SPELL_ATTR_EX3_BATTLEGROUND	 Can casted only on battleground
0x00001000	 SPELL_ATTR_EX3_CAST_ON_DEAD	 target is a dead player (not every spell has this flag)
0x00020000	 SPELL_ATTR_EX3_NO_INITIAL_AGGRO	 Causes no aggro if not missed
0x00040000	 SPELL_ATTR_EX3_CANT_MISS	 Spell should always hit its target
0x00080000	 SPELL_ATTR_EX3_DISABLE_PROC	 during aura proc no spells can trigger (20178, 20375)
0x00100000	 SPELL_ATTR_EX3_DEATH_PERSISTENT	 Death persistent spells
0x00400000	 SPELL_ATTR_EX3_REQ_WAND	 Req wand
0x01000000	 SPELL_ATTR_EX3_REQ_OFFHAND	 Req offhand weapon
0x04000000	 SPELL_ATTR_EX3_CAN_PROC_TRIGGERED	
0x08000000	 SPELL_ATTR_EX3_DRAIN_SOUL	 only drain soul has this flag
0x20000000	 SPELL_ATTR_EX3_NO_DONE_BONUS	 Ignore caster spellpower and done damage mods?
Field5
0x00000008	 SPELL_ATTR_EX4_CANT_PROC_FROM_SELFCAST	
0x00000040	 SPELL_ATTR_EX4_NOT_STEALABLE	 although such auras might be dispellable, they cannot be stolen
0x00000080	 SPELL_ATTR_EX4_TRIGGERED	 spells forced to be triggered
0x00000100	 SPELL_ATTR_EX4_STACK_DOT_MODIFIER	 no effect on non DoTs?
0x00000400	 SPELL_ATTR_EX4_SPELL_VS_EXTEND_COST	 Rogue Shiv have this flag
0x00004000	 SPELL_ATTR_EX4_DAMAGE_DOESNT_BREAK_AURAS	 doesn't break auras by damage from these spells
0x00010000	 SPELL_ATTR_EX4_NOT_USABLE_IN_ARENA	 not usable in arena
0x00020000	 SPELL_ATTR_EX4_USABLE_IN_ARENA	 usable in arena
0x00100000	 SPELL_ATTR_EX4_NOT_CHECK_SELFCAST_POWER	 do not give "more powerful spell" error message
0x02000000	 SPELL_ATTR_EX4_PET_SCALING	 pet scaling auras
0x04000000	 SPELL_ATTR_EX4_CAST_ONLY_IN_OUTLAND	 Can only be used in Outland.
Field6
0x00000002	 SPELL_ATTR_EX5_NO_REAGENT_WHILE_PREP	 not need reagents if UNIT_FLAG_PREPARATION
0x00000008	 SPELL_ATTR_EX5_USABLE_WHILE_STUNNED	 usable while stunned
0x00000020	 SPELL_ATTR_EX5_SINGLE_TARGET_SPELL	 Only one target can be apply at a time
0x00000200	 SPELL_ATTR_EX5_START_PERIODIC_AT_APPLY	 begin periodic tick at aura apply
0x00000400	 SPELL_ATTR_EX5_HIDE_DURATION	 do not send duration to client
0x00002000	 SPELL_ATTR_EX5_HASTE_AFFECT_DURATION	 haste affects duration (e.g. 8050 since 3.3.3)
0x00010000	 SPELL_ATTR_EX5SPECIAL_ITEM_CLASS_CHECK	 this allows spells with EquippedItemClass to affect spells from other items if the required item is equipped
0x00020000	 SPELL_ATTR_EX5_USABLE_WHILE_FEARED	 usable while feared
0x00040000	 SPELL_ATTR_EX5_USABLE_WHILE_CONFUSED	 usable while confused
Field7
0x00000002	 SPELL_ATTR_EX6_ONLY_IN_ARENA	 only usable in arena, not used in 3.2.0a and early
0x00000004	 SPELL_ATTR_EX6_IGNORE_CASTER_AURAS	
0x00000100	 SPELL_ATTR_EX6_IGNORE_CROWD_CONTROL_TARGETS	
0x00000800	 SPELL_ATTR_EX6_NOT_IN_RAID_INSTANCE	 not usable in raid instance
0x00200000	 SPELL_ATTR_EX6_CLIENT_UI_TARGET_EFFECTS	 clientside
0x20000000	 SPELL_ATTR_EX6_NO_DMG_MODS	 do not apply damage mods (usually in cases where it has already been applied)
Field8
0x00000004	 SPELL_ATTR_EX7_PALADIN_AURA	
0x00000008	 SPELL_ATTR_EX7_DISABLED_CLIENT_SIDE	 used only by client to disable spells client-side. some sort of special player flag (0x40000) bypasses that restriction
0x00000020	 SPELL_ATTR_EX7_TOTEM_SPELL	 shaman summon totem spells
0x00000100	 SPELL_ATTR_EX7_HORDE_ONLY	 Teleports, mounts and other spells.
0x00000200	 SPELL_ATTR_EX7_ALLIANCE_ONLY	 Teleports, mounts and other spells.
0x00000400	 SPELL_ATTR_EX7_DISPEL_CHARGES	 Dispel and Spellsteal individual charges instead of whole aura.
0x00000800	 SPELL_ATTR_EX7_INTERRUPT_ONLY_NONPLAYER	
0x00040000	 SPELL_ATTR_EX7_HAS_CHARGE_EFFECT	 Only spells that have Charge among effects.
0x00080000	 SPELL_ATTR_EX7_ZONE_TELEPORT	 Teleports to specific zones.

#############
AuraStates ##
#############
AuraStates describe under which conditions a Spell may or may not be casted.
If the conditions are not met, the Spell is disabled by the client.

(C) used in caster aura state     (T) used in target aura state
(c) used in caster aura state-not (t) used in target aura state-not


ID	 Name	                               Column	              Notes
0	 AURA_STATE_NONE    	                 C	
1	 AURA_STATE_DEFENSE  	                 C	
2	 AURA_STATE_HEALTHLESS_20_PERCENT	    CcT	
3	 AURA_STATE_BERSERKING	                C T	
4	 AURA_STATE_FROZEN	                    c t	
5	 AURA_STATE_JUDGEMENT	                 C	
6	 AURA_STATE_UNKNOWN6		
7	 AURA_STATE_HUNTER_PARRY	             C	
7	 AURA_STATE_ROGUE_ATTACK_FROM_STEALTH	 C	
7	 AURA_STATE_UNKNOWN	                     c                	 creature cheap shot / focused bursts spells
8	 AURA_STATE_UNKNOWN8	                 t               	 test spells
9	 AURA_STATE_UNKNOWN9		
10	 AURA_STATE_WARRIOR_VICTORY_RUSH	     C                	 warrior victory rush
11	 AURA_STATE_UNKNOWN11	                C  t             	 60348 - Maelstrom Ready!, test spells
12	 AURA_STATE_FAERIE_FIRE	                 c t	
13	 AURA_STATE_HEALTHLESS_35_PERCENT	     C T	
14	 AURA_STATE_CONFLAGRATE	                  T	
15	 AURA_STATE_SWIFTMEND	                  T	
16	 AURA_STATE_DEADLY_POISON	   T	
17	 AURA_STATE_ENRAGE	 C	
18	 AURA_STATE_BLEEDING	   T	
19	 AURA_STATE_UNKNOWN19		
20	 AURA_STATE_UNKNOWN20	  c	 only (45317 Suicide)
21	 AURA_STATE_UNKNOWN21		 not used
22	 AURA_STATE_UNKNOWN22	 C  t	 varius spells (63884, 50240)
23	 AURA_STATE_HEALTH_ABOVE_75_PERCENT	 C	

############
ProcFlags ##
############

Spells, triggering other Spells may be limited by the following Flags. A 'proc' may only occur if one or more of these conditions are met.
Additionally a roll agains the ProcChance-Field may be done.
These Flags are subject to ongoing interpretation.

Flag     	 Name                          	         Notes
0x00000000	 PROC_FLAG_NONE             	         does not proc
0x00000001	 PROC_FLAG_KILLED            	         Killed by aggressor
0x00000002	 PROC_FLAG_KILL                     	 Kill target (in most cases need XP/Honor reward)
0x00000004	 PROC_FLAG_SUCCESSFUL_MELEE_HIT	         Successful melee auto attack
0x00000008	 PROC_FLAG_TAKEN_MELEE_HIT	             Taken damage from melee auto attack hit
0x00000010	 PROC_FLAG_SUCCESSFUL_MELEE_SPELL_HIT	 Successful attack by Spell that use melee weapon
0x00000020	 PROC_FLAG_TAKEN_MELEE_SPELL_HIT	     Taken damage by Spell that use melee weapon
0x00000040	 PROC_FLAG_SUCCESSFUL_RANGED_HIT	     Successful Ranged auto attack
0x00000080	 PROC_FLAG_TAKEN_RANGED_HIT	 Taken damage  from ranged auto attack
0x00000100	 PROC_FLAG_SUCCESSFUL_RANGED_SPELL_HIT	   Successful Ranged attack by Spell that use ranged weapon
0x00000200	 PROC_FLAG_TAKEN_RANGED_SPELL_HIT	       Taken damage by Spell that use ranged weapon
0x00000400	 PROC_FLAG_SUCCESSFUL_POSITIVE_AOE_HIT	   Successful AoE (not 100% shure unused)
0x00000800	 PROC_FLAG_TAKEN_POSITIVE_AOE	           Taken AoE (not 100% shure unused)
0x00001000	 PROC_FLAG_SUCCESSFUL_AOE_SPELL_HIT	       Successful AoE damage spell hit (not 100% shure unused)
0x00002000	 PROC_FLAG_TAKEN_AOE_SPELL_HIT	           Taken AoE damage spell hit (not 100% shure unused)
0x00004000	 PROC_FLAG_SUCCESSFUL_POSITIVE_SPELL	   Successful cast positive spell (by default only on healing)
0x00008000	 PROC_FLAG_TAKEN_POSITIVE_SPELL	           Taken positive spell hit (by default only on healing)
0x00010000	 PROC_FLAG_SUCCESSFUL_NEGATIVE_SPELL_HIT   Successful negative spell cast (by default only on damage)
0x00020000	 PROC_FLAG_TAKEN_NEGATIVE_SPELL_HIT	       Taken negative spell (by default only on damage)
0x00040000	 PROC_FLAG_ON_DO_PERIODIC	               Successful do periodic (damage / healing, determined by PROC_EX_PERIODIC_POSITIVE or negative if no procEx)
0x00080000	 PROC_FLAG_ON_TAKE_PERIODIC	               Taken spell periodic (damage / healing, determined by PROC_EX_PERIODIC_POSITIVE or negative if no procEx)
0x00100000	 PROC_FLAG_TAKEN_ANY_DAMAGE	               Taken any damage
0x00200000	 PROC_FLAG_ON_TRAP_ACTIVATION              On trap activation
0x00400000	 PROC_FLAG_TAKEN_OFFHAND_HIT	           Taken off-hand melee attacks(not used)
0x00800000	 PROC_FLAG_SUCCESSFUL_OFFHAND_HIT	       Successful off-hand melee attacks